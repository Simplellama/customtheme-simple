<div class="featured-blog-posts container pt-28 mb-20">
<h3 class="text-6xl Heading font-bold mb-6">{{ section.settings.title | escape }}</h3>

{%- assign blog = blogs[section.settings.blog] -%}

{%- if blog.articles_count > 0 -%}
<div class="blog-articles w-full gap-y-10">
  <!-- Wrap the list items inside a container with a unique ID -->
  <div id="splideblog" class="splide">
    <div class="splide__track">
      <ul class="splide__list">
 
        {%- for article in blog.articles limit: section.settings.post_limit -%}

          <li class="splide__slide max-w-[400px]">

                  <div class="max-w-[400px]" data-cascade >
                    {%- render 'article-card', article: article -%} 
                  </div>
  
          </li> 

        {%- endfor -%}

      </ul>
    </div>
  </div>
</div>
{%- endif -%}

    {%- if section.settings.show_view_all -%}
    <a href="{{ blog.url }}" class="Button Button_secondary mt-8" aria-label="{{ section.settings.view_all_text }}"> {{ section.settings.view_all_text }}</a>
    {%- endif -%}
</div>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        new Splide('#splideblog', {
            type: 'loop',
            perPage: 3,
            gap: '3rem',
            pagination: true
        }).mount();
    });
</script>

{% schema %}
{
  "name": "Blog posts",
  "class": "index-section",
  "settings": [
    {
      "type": "text",
      "id": "title",
      "label": "Heading",
      "default": "Blog posts"
    },
    {
      "id": "blog",
      "type": "blog",
      "label": "Blog"
    },
    {
      "type": "range",
      "id": "post_limit",
      "label": "Posts",
      "min": 3,
      "max": 12,
      "step": 3,
      "default": 3
    },
    {
      "type": "checkbox",
      "id": "blog_show_author",
      "label": "Show author",
      "default": false
    },
    {
      "type": "checkbox",
      "id": "blog_show_date",
      "label": "Show date",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "show_view_all",
      "label": "Show 'View all' button",
      "default": false
    },
    {
      "type": "text",
      "id": "view_all_text",
      "label": "View all button text",
      "default": "View all"
    }
  ],
  "presets": [
    {
      "name": "Blog posts",
      "category": "Blog",
      "settings": {
        "blog": "News",
        "post_limit": 3
      }
    }
  ]
}
{% endschema %}